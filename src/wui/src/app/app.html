<div class="flex h-screen bg-gray-50 dark:bg-gray-900 overflow-hidden">

  <aside
    class="hidden lg:flex lg:w-1/4 flex-col bg-white border-r border-gray-200 dark:bg-gray-800 dark:border-gray-700">
    <div class="p-6">
      <div class="flex items-center my-48">
        <img src="images/tripnow.png" alt="TripNow Logo" class="w-full w-auto object-contain">
      </div>
    </div>
  </aside>

  <div class="flex-1 flex flex-col min-w-0 overflow-hidden">

    <header class="bg-white border-b border-gray-200 px-8 py-4 dark:bg-gray-800 dark:border-gray-700 z-10">
      <div class="flex justify-start items-center">
        <div class="flex space-x-4">
          <span class="text-3xl font-bold dark:text-gray-300">TripNow</span>
        </div>
      </div>
    </header>

    <main class="flex-1 overflow-y-auto p-8">
      <div class="max-w-7xl mx-auto">
        <div class="cols">
          <div class="grid grid-cols-1 gap-4 mb-4">
            <div class="p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
              <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold tracking-tight text-gray-900 dark:text-white">{{ title() }}</h2>
                <button type="button" (click)="reservationForm.reset()" data-modal-target="create-modal"
                  data-modal-toggle="create-modal"
                  class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">
                  Create New Reservation
                </button>
              </div>

              <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
                <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                  <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                    <tr>
                      <th scope="col" class="px-6 py-3">Customer Email</th>
                      <th scope="col" class="px-6 py-3">Destination</th>
                      <th scope="col" class="px-6 py-3">Amount</th>
                      <th scope="col" class="px-6 py-3">Status</th>
                      <th scope="col" class="px-6 py-3">Created At</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let res of reservations()"
                      class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                      <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">{{
                        res.customerEmail }}</td>
                      <td class="px-6 py-4">{{ res.tripCountry }}</td>
                      <td class="px-6 py-4">{{ res.amount | currency }}</td>
                      <td class="px-6 py-4">
                        <span [ngClass]="{
                        'bg-yellow-100 text-yellow-800': res.status === 'PendingRiskCheck',
                        'bg-green-100 text-green-800': res.status === 'Confirmed',
                        'bg-red-100 text-red-800': res.status === 'Rejected',
                        'bg-gray-100 text-gray-800': res.status === 'Cancelled'
                      }" class="text-xs font-medium px-2.5 py-0.5 rounded-full">
                          {{ res.status }}
                        </span>
                      </td>
                      <td class="px-6 py-4">{{ res.createdAt | date:'short' }}</td>
                    </tr>
                    <tr *ngIf="reservations().length === 0">
                      <td colspan="5" class="px-6 py-4 text-center">No reservations found.</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>

<!-- Modal -->
<div id="create-modal" tabindex="-1" aria-hidden="true"
  class="fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full">
  <div class="relative w-full max-w-md max-h-full">
    <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
      <div class="px-6 py-6 lg:px-8">
        <h3 class="mb-4 text-xl font-medium text-gray-900 dark:text-white">Create Reservation</h3>
        <form class="space-y-6" [formGroup]="reservationForm" (ngSubmit)="onSubmit()">
          <div>
            <label for="email" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Customer
              Email</label>
            <input type="email" formControlName="customerEmail" id="email"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white"
              placeholder="name@company.com" required>
          </div>
          <div>
            <label for="country" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Trip
              Country</label>
            <input type="text" formControlName="tripCountry" id="country"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white"
              placeholder="Italy" required>
          </div>
          <div>
            <label for="amount" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Amount</label>
            <input type="number" formControlName="amount" id="amount"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white"
              required>
          </div>
          <button type="submit" [disabled]="reservationForm.invalid || isCreating()" data-modal-hide="create-modal"
            class="w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
            {{ isCreating() ? 'Creating...' : 'Submit Reservation' }}
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

<router-outlet />
